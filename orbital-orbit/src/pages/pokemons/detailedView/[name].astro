---
import Layout from '../../../layouts/Layout.astro';
const { name } = Astro.params

const query = `
    query pokemon_details($name: String) {
      species: pokemon_v2_pokemonspecies(where: {name: {_eq: $name}}) {
        name
        id
      }
    }
  `
const response = await fetch(
	"https://beta.pokeapi.co/graphql/v1beta",
	{
		method: "POST",
		body: JSON.stringify({
		query,
		variables: {name},
		operationName: "pokemon_details"
		})
	}
);
const pokedex = await response.json();
const pokemon = pokedex.data.species[0];
---

<Layout title="Welcome to Astro.">
	<main>
    <div class="pokemon-container">
      <h1> Pokemon: #{pokemon.id} - {pokemon.name} </h1>
      <img src=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`/>
    </div>
    
	</main>
</Layout>

<style>
  .pokemon-container {
    display: flex;
    justify-content: center;
    max-width: 256px;
    margin: auto;
  }

  img {
    width: 100%;
  }
</style>
